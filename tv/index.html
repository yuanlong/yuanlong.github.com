<!DOCTYPE html>
<html data-theme="dark">
	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="renderer" content="webkit">
		<title>iMovie</title>
		<link rel="apple-touch-icon" href="../iMovie/favicon.png"/>
		<link href="../iMovie/favicon.png" rel="shortcut icon"/>
		<link rel="stylesheet" href="css/iMoviePC.css" type="text/css" />
	</head>
	<body>
		 <div id="app"></div>
		 <routerPage html="pages/index.html"></routerPage>
		 <routerPage html="pages/list.html"></routerPage>
		 <routerPage html="pages/play.html"></routerPage>
		 <routerPage html="pages/search.html"></routerPage>
		 <routerPage html="pages/history.html"></routerPage>
		 <template id="main">
			 <div>
			 <div class="g-header white">
			 	<div class="header-contain g-header-container" id="header-contain">
			 		<div class="container">
			 			<div class="g-box">
			 				<div id="header-logo-wrap" class="logo-wrap white">
			 					<a class="logo" href="#/" title="首页"></a>
			 					<a target="_blank"><i class="iconfont iconpindao-juji"></i></a>
			 				</div>
			 				<div class="g-head-center white">
			 					<div>
			 						<ul class="g-head-nav">
			 							<li class="g-view"><a href="#/">首页</a></li>
			 							<li class="g-view top-nav-more-large">
			 								<div class="nav-item other-top-nav" id="top-nav" @mouseover="showDH=true" @mouseout="showDH=false">
			 									导航
			 									<ul v-show="showDH">
			 										<li class="arrow"></li>
			 										<li>
			 											<div class="content">
			 												<dl class="top-nav-channel">
			 													<dd class="" v-if="MCIDS">
			 														<router-link v-for="c in MCIDS" :to="'/list/'+c.cid">{{c.sname}}</router-link>
			 													</dd>
			 													<dd class="dd-1" v-if="GCIDS">
																	<router-link v-for="c in GCIDS" :to="'/list/'+c.cid">{{c.sname}}</router-link>
			 													</dd>
			 													<dd class="dd-2" v-if="OCIDS">
																	<router-link v-for="c in OCIDS" :to="'/list/'+c.cid">{{c.sname}}</router-link>
			 													</dd>
			 												</dl>
			 											</div>
			 										</li>
			 									</ul>
			 								</div>
			 							</li>
			 							<li class="g-view"><router-link to="/history">播放历史</router-link></li>
			 						</ul>
			 					</div>
			 				</div>
			 				<div class="g-so so-other">
			 					<div class="g-so-box">
			 						<div class="search-root">
			 							<div class="search-input">
			 								<input placeholder="输入你想看的电影名字" v-model="wd" id="search-input-box" autocomplete="off" @keyup.enter="searchMovie">
			 								<div class="search-button-box" @click="searchMovie"><a class="search-button">
			 										<img src="https://img.alicdn.com/tfs/TB1_iRuh.H1gK0jSZSyXXXtlpXa-20-20.svg"><span>搜索</span></a></div>
			 							</div>
			 						</div>
			 					</div>
			 				</div>
			 			</div>
			 		</div>
			 	</div>
			 </div>
			 <div class="modulelist_s_body">
				 <router-view></router-view>
			 </div>
			 
			<div style="margin-bottom:40px" id="footer-container">
				<div class="container">
					<div class="g-footer" style="text-align: center;">
						<p style="margin-right: 0;color: hsla(0,0%,100%,.38);  text-decoration: none;display: inline-block;line-height: 17px;margin-bottom: 8px;font-size: 12px;">
							免责声明：本页面仅限学习VUE使用。本站所有资源均请求自互联网接口，没有提供影片资源存储，也未参与录制、上传。
						</p>
					</div>
				</div>
			</div>
			</div>
		 </template>
		<script src="./sw-registration.js"></script>
		<script src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue@2.6.12"></script>
		<script src="https://cdn.jsdelivr.net/npm/vue-router@3.0.3/dist/vue-router.min.js"></script>
		<script src="https://unpkg.com/vue-lazyload/vue-lazyload.js"></script>
		<script src="./js/jquery.md5.js"></script>
		<script src="./js/jquery.cache.js"></script>
		<script src="./js/CIDS.js"></script>
		<script src="./js/iMovie.js"></script>
		<script>
			Vue.use(VueLazyload, {  
			  preLoad: 1.3,   //预加载的宽高比
			  loading: 'data:image/gif;base64,R0lGODlhCwAPAIAAAFVVVf///yH5BAEAAAEALAAAAAALAA8AAAILhI+py+0Po5y0wgIAOw==',//图片加载的路径
			  attempt: 1//尝试加载次数
			});
		        function loadRouterPage(){
		            var pages=$("routerPage");
		            for(var i=0;i<pages.length;i++){
		                var page=pages[i];
		                var html=$(page).attr("html");
		                var js=$(page).attr("js");
		                var code="";
		                if(html){
		                    code=$.ajax({url:html+"?x="+new Date().getTime(),dataType:"html",async:false}).responseText;
		                    if(code.indexOf("<script>")>0){
		                        var st=code.toLowerCase().indexOf("<script>");
		                        var ed=code.toLowerCase().lastIndexOf("script>");
		                        var sc=code.substring(st+8,ed-2);                        
		                        code=code.substring(0,st);
		                        page.outerHTML=code;
		                        eval(sc);
		                    }
		                }else{
		                    page.outerHTML=code;
		                }
		                if(js){
		                    code=$.ajax({url:js,async:false}).responseText;
		                    eval(code);
		                }
		            }
		
		            var  router = new VueRouter({
		            routes: [
		                    {path: '/', name: 'index', component: Index}
		                    ,{path: '/list/:cid', name: 'list', component: List}
		                    ,{path: '/play/:vid/:vname', name: 'play', component: Play},
							,{path: '/search/:wd', name: 'search', component: Search},
							,{path: '/history', name: 'history', component: History}
		           ]});
		
		           var app = new Vue({
		                router: router,
		                render: function(v){
		                    return v(Vue.extend({
		                            template:"#main",
									data(){
									    return {
											showDH:false,
									       MCIDS:M_CIDS,
										   GCIDS:G_CIDS,
										   OCIDS:O_CIDS,
									       CIDS:CIDS,
										   wd:""
									    }
									},
									methods:{
										searchMovie(){
											if(this.wd!=""){
												console.log(this.wd);
											this.$router.push({ path: '/search/'+this.wd });
											}
										}
									},
									mounted() {
									}
		                    }));
		                }
		            }).$mount('#app');
		
		        }
				Vue.prototype.commonFunction = {
					
				} ;
		        $(function(){
		            loadRouterPage();
		        });
		
		    </script>
	</body>
</html>
